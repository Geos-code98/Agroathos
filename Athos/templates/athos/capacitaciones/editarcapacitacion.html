{% extends 'base/baseathos.html' %}
{% block contenido%}



<section class="contenedor" id="section-usuarios">
	<div id="registration-form">
		<div class='fieldset'>
		<div class="col-lg-6">
					<div class="card">
					<div class="card-header"><strong>Registro</strong><small> PLANTA</small></div>
					<div class="card-body card-block">
			<form id="frmajax"  method="post" data-validate="parsley">
				{% csrf_token %}
				{% if form.errors %}
				    {% for field in form %}

				        {% for error in field.errors %}
				            <div class="alert alert-danger">
				                <strong>{{ field.label|escape }}:</strong>
				                <strong>{{ error|escape }}</strong>
				            </div>
				        {% endfor %}
				    {% endfor %}
				    {% for error in form.non_field_errors %}
				        <div class="alert alert-danger">
				            <strong>{{ error|escape }}</strong>
				        </div>
				    {% endfor %}
				{% endif %}

				
				<div class='form-group'>
					{{form.fecha_hora_inicio.label}}
					{{form.fecha_hora_inicio}}
				</div>
				<div class='form-group'>
					{{form.fecha_hora_fin.label}}
					{{form.fecha_hora_fin}}
				</div>
				<div class='form-group'>
					{{form.codigoacta.label}}
					{{form.codigoacta}}
				</div>
				
				<div class='form-group'>
					{{form.anexo_datos.label}}
					{{form.anexo_datos}}
				</div>
				
				<div class='form-group'>
					{{form.anexo_area.label}}
					{{form.anexo_area}}
				</div>
				
				<div class='form-group'>
					{{form.anexo_competencia.label}}
					{{form.anexo_competencia}}
				</div>
				<div class='form-group'>
					{{form.anexo_tema.label}}
					{{form.anexo_tema}}
				</div>
				<div class='form-group'>
					{{form.anexo_alcance.label}}
					{{form.anexo_alcance}}
				</div>
				<div class='form-group' >
					{{form.idtema.label}}
					{{form.idtema}}
				</div>
				
				<div class='form-group'>
					{{form.lugar.label}}
					{{form.lugar}}
				</div>
				<div class='form-group'>
					{{form.lugar_especifico.label}}
					{{form.lugar_especifico}}
				</div>
				<div class='form-group'>
					{{form.cantidad.label}}
					{{form.cantidad}}
				</div>
				<div class='form-group'>
					{{form.tipo_participante.label}}
					{{form.tipo_participante}}
				</div>
				<div class='form-group'>
					{{form.tipo_capacitacion.label}}
					{{form.tipo_capacitacion}}
				</div>
				<div class='form-group'>
					{{form.expositor.label}}
					{{form.expositor}}
				</div>
				<div class='form-group'>
					{{form.dniexpositor.label}}
					{{form.dniexpositor}}
				</div>
				<div class='form-group'>
					{{form.empresaexpositor.label}}
					{{form.empresaexpositor}}
				</div>
				<div class='form-group'>
					{{form.puestoexpositor.label}}
					{{form.puestoexpositor}}
				</div>
				<div class='form-group'>
					{{form.imagen_acta.label}}
					{{form.imagen_acta}}
				</div>
				<div class='form-group'>
					{{form.imagen_capacitacion.label}}
					{{form.imagen_capacitacion}}
				</div>
				<div class='form-group'>
					{{form.anexo_estado.label}}
					{{form.anexo_estado}}
				</div>

				<input type="submit" value="Registrar" id="registrar" class="btn btn-primary">
			</form>
	</div>
	</div>
</div>
</div>
</div>
</section>
{% endblock %}

{%block script%}


<script>/*
window.onerror = function(errorMsg) {
	$('#console').html($('#console').html()+'<br>'+errorMsg)
}*/
$(function () {  
   $("#datepicker").datetimepicker({  
       format: 'Y-m-d H:i:s',  
       timepicker:true,
       step:5, 
   });  
   $("#datepicker1").datetimepicker({  
       format: 'Y-m-d H:i:s',  
       timepicker:true,
       step:5, 
   });  
  }); 


	$("#id_anexo_estado option[value="+ 2 +"]").attr("selected",true);
  $("#id_anexo_estado option[value=" + 1 + "]").hide(); 
 </script>
 <script>/*
window.onerror = function(errorMsg) {
	$('#console').html($('#console').html()+'<br>'+errorMsg)
}*/
$(function () {  
   $("#datepicker").datetimepicker({  
       format: 'Y-m-d H:i:s',  
       timepicker:true,
       step:5, 
   });  
   $("#datepicker1").datetimepicker({  
       format: 'Y-m-d H:i:s',  
       timepicker:true,
       step:5, 
   });  
  });  
 </script>
 <script>
 	 function request_tema (fundoId) {
		var urldata="/ajax/load-tema/" + fundoId;
     
      $.ajax({                       
        url: urldata,                    
        data: {},
        success: function (data) {
        var option_html = `<option value="0" >---------</option>`;
        for (var i = 0; i < data.length; i++) { 	
        
        		
        			option_html += `<option value="${data[i].id}" >${data[i].nom_tema}</option>`;
        		
        } 
        $("#id_anexo_tema").html(option_html);
        	console.log(option_html);
        },
        error: function(result) {
            console.log(result);
        }

      });

	} 

    $("#id_anexo_competencia").change(function () { 

      var fundoId = $(this).val();
      	
      request_tema(fundoId)
    });
 </script>

{%endblock%}