{% extends 'base/baseathos.html' %}
{% block contenido%}



<section class="contenedor" id="section-usuarios">
	<div id="registration-form">
		<div class='fieldset'>
		<div class="col-lg-6">
					<div class="card">
					<div class="card-header"><strong>Registro</strong><small> ENFRIADO</small></div>
					<div class="card-body card-block">
			<form id="frmajax"  method="post" data-validate="parsley">
				{% csrf_token %}
				
				<div class='form-group'>
					{{form.anexo_centro.label}}
					{{form.anexo_centro}}
				</div>
				<div class='form-group'>
					{{form.anexo_tipo.label}}
					{{form.anexo_tipo}}
				</div>
				<div class='form-group'>
					{{form.anexo_proveedor.label}}
					{{form.anexo_proveedor}}
				</div>
				<div class='form-group'>
					{{form.factura.label}}
					{{form.factura}}
				</div>
				
				<div class='form-group'>
					{{form.orden.label}}
					{{form.orden}}
				</div>

				<div class='form-group'>
					{{form.anticipo.label}}
					{{form.anticipo}}
				</div>
				<div class='form-group'>
					{{form.anexo_moneda.label}}
					{{form.anexo_moneda}}
				</div>
				<div class='form-group'>
					{{form.fecha.label}}
					{{form.fecha}}
				</div>
				<div class='form-group'>
					{{form.valor.label}}
					{{form.valor}}
				</div>
				<div class='form-group'>
					{{form.observacion.label}}
					{{form.observacion}}
				</div>
				<div class='form-group'>
					{{form.anexo_estado.label}}
					{{form.anexo_estado}}
				</div>
				
				


				<input type="submit" value="Registrar" id="registrar" class="btn btn-primary">
			</form>
	</div>
	</div>
</div>
</div>
</div>
</section>
{% endblock %}

{%block script%}
 <script>  
 /*
window.onerror = function(errorMsg) {
	$('#console').html($('#console').html()+'<br>'+errorMsg)
}*/
$(function () {  
   $("#id_fecha").datetimepicker({  
       format: 'Y-m-d',  
       timepicker:false  
   });  
  });  
 </script>
 <script>  
     $(document).ready(function () {  
           jQuery.datetimepicker.setLocale('es');  
     });  
   </script> 
  <script>  
     $(document).ready(function () {  
		n =  new Date();
		y = n.getFullYear();
		//Mes
		m = n.getMonth() + 1;
		//DÃ­a
		d = n.getDate();

//Lo ordenas a gusto.
		 
       

          

     });  
   </script>


<script >
	 function request_proveedor (ubicacionId) {
		var urldata="/ajax/load-proveedor/" + ubicacionId;
     
      $.ajax({                       
        url: urldata,                    
        data: {},
        success: function (data) {
        var option_html = `<option value="0" >---------</option>`;
        for (var i = 0; i < data.length; i++) { 	
        
        		
        			option_html += `<option value="${data[i].id}" >${data[i].proveedor}</option>`;
        		
        } 
        $("#id_anexo_proveedor").html(option_html);
        	console.log(option_html);
        },
        error: function(result) {
            console.log(result);
        }

      });

	} 





       $("#id_anexo_centro").change(function () { 

      var ubicacionId = $(this).val();
      	
      request_proveedor(ubicacionId)
    });
</script>


 {% endblock %}